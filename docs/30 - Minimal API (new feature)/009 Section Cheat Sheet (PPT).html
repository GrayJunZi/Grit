<h4>Overview of Minimal API</h4><p>- It is a Microsoft's API that is used to create HTTP services (or HTTP APIs) with minimal dependencies on packages.</p><p>- Alternative to Web API Controllers. Mainly used to create HTTP services or Microservices.</p><p><br></p><p><strong>REST API (Representational State Transfer)</strong></p><figure><img src="https://img-c.udemycdn.com/redactor/raw/article_lecture/2023-02-14_15-45-47-3954606c1463d9ba1b312acfbcef0ce4.png"></figure><p><br></p><p><strong>MVC Controller (Microsoft.AspNetCore.Mvc.Controller)</strong></p><ul><li><p>Full support for model binding and model validation.</p></li><li><p>Full support for views.</p></li><li><p>Full support for filters &amp; filter pipeline.</p></li></ul><p><br></p><p><strong>API Controller (Microsoft.AspNetCore.Mvc.ApiControllerAttribute)</strong></p><ul><li><p>Full support for model binding and model validation.</p></li><li><p>No support for views.</p></li><li><p>Full support for filters &amp; filter pipeline.</p></li></ul><p><br></p><p><strong>Minimal API </strong>(IApplicationBuilder.Map* Methods)</p><ul><li><p>Limited support for custom model binding and custom model validation (needs to improve).</p></li><li><p>No support for views.</p></li><li><p>No support for filters &amp; filter pipeline; but supports "Endpoint Filters" alternatively.</p></li></ul><p><br></p><p><br></p><p><br></p><h4>Routing in Minimal API</h4><p><strong>1. MapGet()</strong></p><p>Creates an endpoint that receives HTTP GET request.</p><pre class="prettyprint linenums">app.MapGet("/route", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p><br></p><p><strong>2. MapPost()</strong></p><p>Creates an endpoint that receives HTTP DELETE request.</p><pre class="prettyprint linenums">app.MapDelete("/route", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p><br></p><p><strong>3. MapPut()</strong></p><p>Creates an endpoint that receives HTTP PUT request.</p><pre class="prettyprint linenums">app.MapPut("/route", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p><br></p><p><strong>4. MapDelete()</strong></p><p>Creates an endpoint that receives HTTP DELETE request.</p><pre class="prettyprint linenums">app.MapDelete("/route", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p><br></p><p><br></p><p><br></p><h4>Route Parameters in Minimal API</h4><p>Route parameters can be created as you were creating them in UseEndpoints() or in MVC controllers.</p><pre class="prettyprint linenums">app.MapGet("/route/{parameter}", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p><br></p><p><br></p><h4>Route Constraints in Minimal API</h4><p>Route constraints can be used as you were using them in UseEndpoints() or in MVC controllers.</p><pre class="prettyprint linenums">app.MapGet("/route/{parameter:constraint}", async (HttpContext context) =&gt; {
   await context.Response.WriteAsync("your response");
});</pre><p>Eg: int, bool, datetime, decimal, double, float, guid, long, Minlength, maxlength, length, min, max, range, alpha, regex, required</p><p><br></p><p><br></p><p><br></p><h4>Map Groups in Minimal API</h4><p>A map group (or route group) is a set of endpoints with a common prefix.</p><p>A map group is a collection of endpoints created with Map* methods such as MapGet(), MapPost() etc.</p><p><br></p><p><strong>MapGet()</strong></p><p>Creates an endpoint that receives HTTP GET request.</p><pre class="prettyprint linenums">var mapGroup = app.MapGroup("/route-prefix");

mapGroup.MapGet();
mapGroup.MapPost(..);</pre><p><br></p><p><br></p><p><br></p><h4>IResult</h4><p>The Microsoft.AspNetCore.Http.IResult is the base interface that is implemented by different result types such as Ok, Json, BadRequest etc., which can be returned by endpoints in minimal API.</p><ol><li><p>Results.Ok( )</p></li><li><p>Results.Json( )</p></li><li><p>Results.Text( )</p></li><li><p>Results.File( )</p></li><li><p>Results.BadRequest( )</p></li><li><p>Results.NotFound( )</p></li><li><p>Results.Unauthorized( )</p></li><li><p>Results.ValidationProblem( )</p></li></ol><p><br></p><p><br></p><h4>IResult Implementations</h4><p><strong>1. Results.Ok</strong></p><p>Response Content-type: application/json [or] text/plain</p><p>Response Status Code: 200</p><p><code>return Results.Ok(response_object); //can be a string or model</code></p><p><br></p><p><strong>2. Results.Json</strong></p><p>Response Content-type: application/json</p><p>Response Status Code: 200</p><p><code>return Results.Json(response_object); //should be a model</code></p><p><br></p><p><strong>3. Results.Text</strong></p><p>Response Content-type: text/plain</p><p>Response Status Code: 200</p><p><code>return Results.Text(response_string); //should be a string</code></p><p><br></p><p><strong>4. Results.File</strong></p><p>Response Content-type: application/octet-stream</p><p>Response Status Code: 200</p><p><code>return Results.File(stream_object); //should be 'System.IO.Stream' type</code></p><p><br></p><p><strong>5. Results.BadRequest</strong></p><p>Response Content-type: N/A</p><p>Response Status Code: 400</p><p><code>return Results.BadRequest(response_object); //can be a string or model</code></p><p><br></p><p><strong>6. Results.NotFound</strong></p><p>Response Content-type: N/A</p><p>Response Status Code: 404</p><p><code>return Results.NotFound(response_object); //can be a string or model</code></p><p><br></p><p><strong>7. Results.Unauthorized</strong></p><p>Response Content-type: N/A</p><p>Response Status Code: 401</p><p><code>return Results.Unauthorized(response_object); //can be a string or model</code></p><p><br></p><p><strong>8. Results.ValidationProblem</strong></p><p>Response Content-type: application/json</p><p>Response Status Code: 400</p><p><code>return Results.ValidationProblem(response_object); //automatically creates JSON with validation errors</code></p><p><br></p><p><br></p><p><br></p><h4>Endpoint Filter</h4><p>EndPoint Filters execute much like 'action filters' i.e., 'before' and 'after' the execution of minimal API endpoint.</p><p>They are mainly used to validate parameters of the endpoint.</p><figure><img src="https://img-c.udemycdn.com/redactor/raw/article_lecture/2023-04-23_07-04-46-4394548b8fa440b3579e6e69e451876a.png"></figure><p><br></p><p><strong>Creating an Endpoint Filter</strong></p><p>Endpoint filters can be registered by providing a Delegate that takes a EndpointFilterInvocationContext and returns a EndpointFilterDelegate.</p><pre class="prettyprint linenums">app.MapGet("/route", () =&gt; {
   //your endpoint code here
})
.AddEndpointFilter(async (context, next) =&gt; {
   //before logic
   var result = await next(context); //calls subsequent filter or endpoint

   //after logic
   return result;
});</pre><p><br></p><p><br></p><p><br></p><h4>IEndpointFilter</h4><p>Creating an Endpoint Filter by implementing IEndpointFilter interface</p><p>The InvokeAsync() method takes a EndpointFilterInvocationContext and returns a EndpointFilterDelegate.</p><p><br></p><pre class="prettyprint linenums">class CustomEndpointFilter : IEndpointFilter
{
   public async ValueTask&lt;object?&gt; InvokeAsync(EndpointFilterInvocationContext context, EndpointFilterDelegate next)
   {
      //before logic
      var result = await next(context); //calls subsequent filter or endpoint

      //after logic
      return result;
   }
}</pre><p><br></p>